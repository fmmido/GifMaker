<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Generator</title>
    <style>
        #picture1 {
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body>
    <h1>GIF Generator</h1>
    
    <!-- This is the image that we will change. -->
    <img id="picture1" width="200px" height="200px" src="https://vignette.wikia.nocookie.net/starpolar/images/9/96/Paul_blart.jpg/revision/latest?cb=20150419171412" alt="GIF Frame"/>
    
    <button onclick="generateGif()">Generate and Download GIF</button>

    <script src="https://cdn.jsdelivr.net/npm/gif.js/dist/gif.js"></script>
    <script>
        // Set up the array of frames
        var gifImages = [
            "https://vignette.wikia.nocookie.net/starpolar/images/9/96/Paul_blart.jpg/revision/latest?cb=20150419171412",
            "https://i.ytimg.com/vi/A5KWYdrOXDk/movieposter.jpg",
            "http://content.tv3.ie/content/images/0647/1_165781.jpg",
            "https://upload.wikimedia.org/wikipedia/en/thumb/4/47/Spongebob-squarepants.svg/1200px-Spongebob-squarepants.svg.png",
            "http://i0.kym-cdn.com/entries/icons/mobile/000/016/958/Dankkkk.jpg"
        ];

        var currentFrame = 0; // Call it a frame because we're making a gif and every image (so every array index) will be a frame
        
        function changePicture() {
            document.getElementById("picture1").src = gifImages[currentFrame]; // Get the gif element and set its source to the current frame
            currentFrame++; // Increase the current frame by 1
            if (currentFrame >= gifImages.length) { // If we've gone past the end of our array of frames, then:
                currentFrame = 0; // Reset back to frame 0
            }
        }

        setInterval(changePicture, 100); // Change picture every 100 milliseconds

        function generateGif() {
            var gif = new GIF({
                workers: 2,
                quality: 10
            });

            gifImages.forEach(function(url) {
                var img = new Image();
                img.src = url;
                img.onload = function() {
                    gif.addFrame(img, {delay: 100});
                    if (gif.frames.length === gifImages.length) {
                        gif.render();
                    }
                };
            });

            gif.on('finished', function(blob) {
                var url = URL.createObjectURL(blob);
                var a = document.createElement('a');
                a.href = url;
                a.download = 'generated.gif';
                a.click();
            });
        }
    </script>
</body>
</html>
